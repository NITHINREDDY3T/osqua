{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\harsha\\\\Desktop\\\\TESTING\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\harsha\\\\Desktop\\\\TESTING\",\"filename\":\"C:\\\\Users\\\\harsha\\\\Desktop\\\\TESTING\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\harsha\\\\Desktop\\\\TESTING\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.23.0:development":{"value":{"code":"const express = require('express');\nconst mongoose = require('mongoose');\nconst bodyParser = require('body-parser');\nconst bcrypt = require('bcrypt');\nconst session = require('express-session');\nconst app = express();\nconst MongoStore = require('express-session-mongo');\napp.use(express.static('public'));\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.set('view engine', 'ejs');\nmongoose.connect('mongodb+srv://nikki:niThin45@cluster0.89imtcg.mongodb.net/nikki?retryWrites=true&w=majority', {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nconst userSchema = new mongoose.Schema({\n  username: String,\n  email: String,\n  password: String\n});\nconst User = mongoose.model('User', userSchema);\nconst postSchema = new mongoose.Schema({\n  title: String,\n  link: String,\n  category: String,\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  likes: [{\n    userId: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'User'\n    }\n  }],\n  dislikes: [{\n    userId: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'User'\n    }\n  }],\n  timestamp: {\n    type: Date,\n    default: Date.now\n  },\n  comments: [{\n    text: String,\n    userId: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'User'\n    }\n  }]\n});\nconst Post = mongoose.model('Post', postSchema);\napp.use(session({\n  secret: 'Osos@4545',\n  // Change this to a secure secret key\n  resave: false,\n  saveUninitialized: true\n}));\n\n// Function to calculate time ago\nfunction timeAgo(timestamp) {\n  const now = new Date();\n  const postedTime = new Date(timestamp);\n  const timeDiff = now - postedTime;\n  const seconds = Math.floor(timeDiff / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n  if (days > 0) {\n    return days + ' day(s) ago';\n  } else if (hours > 0) {\n    return hours + ' hour(s) ago';\n  } else if (minutes > 0) {\n    return minutes + ' minute(s) ago';\n  } else {\n    return 'Just now';\n  }\n}\n\n// Registration route\napp.get('/register', (req, res) => {\n  res.render('login-register', {\n    error: null\n  });\n});\napp.post('/register', async (req, res) => {\n  const {\n    username,\n    email,\n    password\n  } = req.body;\n  try {\n    const existingUser = await User.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.render('login-register', {\n        error: 'Email already registered'\n      });\n    }\n    const hashedPassword = await bcrypt.hash(password, 10);\n    const newUser = new User({\n      username,\n      email,\n      password: hashedPassword\n    });\n    await newUser.save();\n    console.log('User registered successfully.');\n    res.redirect('/login');\n  } catch (err) {\n    console.error(err);\n    res.status(500).render('login-register', {\n      error: 'Internal server error'\n    });\n  }\n});\n\n// Root route\napp.get('/', (req, res) => {\n  res.render('login-register', {\n    error: null\n  });\n});\n\n// Login route\napp.get('/login', (req, res) => {\n  res.render('login-register', {\n    error: null\n  });\n});\napp.post('/login', async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  try {\n    const user = await User.findOne({\n      email\n    });\n    if (!user) {\n      return res.render('login-register', {\n        error: 'Invalid email or password'\n      });\n    }\n    const passwordMatch = await bcrypt.compare(password, user.password);\n    if (!passwordMatch) {\n      return res.render('login-register', {\n        error: 'Invalid email or password'\n      });\n    }\n    req.session.user = user;\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).render('login-register', {\n      error: 'Internal server error'\n    });\n  }\n});\napp.get('/dashboard', async (req, res) => {\n  const {\n    search,\n    category\n  } = req.query; // Get the search query and category from the URL\n  const filter = {};\n  if (search) {\n    filter.title = {\n      $regex: new RegExp(search, 'i')\n    }; // Case-insensitive title search\n  }\n\n  if (category && category !== 'All') {\n    filter.category = category; // Filter by category if specified\n  }\n\n  try {\n    const posts = await Post.find(filter).populate('userId', 'username').populate('comments.userId', 'username').sort({\n      timestamp: -1\n    });\n    const categorizedPosts = {};\n\n    // Categorize posts by category\n    posts.forEach(post => {\n      if (!categorizedPosts[post.category]) {\n        categorizedPosts[post.category] = [];\n      }\n      categorizedPosts[post.category].push(post);\n    });\n    res.render('dashboard', {\n      user: req.session.user,\n      posts: categorizedPosts,\n      error: null,\n      timeAgo,\n      search,\n      selectedCategory: category || 'All' // Pass the selected category to the template\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(500).render('dashboard', {\n      user: req.session.user,\n      posts: {},\n      error: 'Error fetching posts',\n      timeAgo,\n      search: '',\n      selectedCategory: 'All' // Pass the selected category to the template\n    });\n  }\n});\n\n// Add a new route to handle the search request\napp.get('/search', async (req, res) => {\n  const {\n    search\n  } = req.query; // Get the search query from the request\n\n  try {\n    // Perform a database query to find related links by title\n    const results = await Post.find({\n      title: {\n        $regex: search,\n        $options: 'i'\n      }\n    });\n\n    // Render a partial view or HTML with the search results\n    res.render('search-results', {\n      results\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Internal server error');\n  }\n});\n\n// Logout route\napp.get('/logout', (req, res) => {\n  req.session.destroy(err => {\n    if (err) {\n      console.error(err);\n    }\n    res.redirect('/login');\n  });\n});\n\n// Post Description route\napp.post('/post-description', async (req, res) => {\n  if (!req.session.user) {\n    return res.redirect('/login');\n  }\n  const {\n    title,\n    link,\n    category\n  } = req.body;\n  const userId = req.session.user._id;\n  try {\n    const newPost = new Post({\n      title,\n      link,\n      category,\n      userId,\n      likes: [],\n      dislikes: [],\n      comments: []\n    });\n    await newPost.save();\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).render('dashboard', {\n      user: req.session.user,\n      posts: {},\n      error: 'Error posting description',\n      timeAgo,\n      search: ''\n    });\n  }\n});\n\n// Like route\napp.get('/like-post/:id', async (req, res) => {\n  if (!req.session.user) {\n    return res.redirect('/login');\n  }\n  try {\n    const postId = req.params.id;\n    const post = await Post.findById(postId);\n    if (!post) {\n      return res.status(404).send('Post not found');\n    }\n    const userId = req.session.user._id;\n\n    // Check if the user has already liked this post\n    if (post.likes.some(like => like.userId.equals(userId))) {\n      return res.status(400).send('You have already liked this post');\n    }\n\n    // Remove dislike if the user has previously disliked this post\n    const userDislikeIndex = post.dislikes.findIndex(dislike => dislike.userId.equals(userId));\n    if (userDislikeIndex !== -1) {\n      post.dislikes.splice(userDislikeIndex, 1);\n    }\n    post.likes.push({\n      userId\n    });\n    await post.save();\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Internal server error');\n  }\n});\n\n// Dislike route\napp.get('/dislike-post/:id', async (req, res) => {\n  if (!req.session.user) {\n    return res.redirect('/login');\n  }\n  try {\n    const postId = req.params.id;\n    const post = await Post.findById(postId);\n    if (!post) {\n      return res.status(404).send('Post not found');\n    }\n    const userId = req.session.user._id;\n\n    // Check if the user has already disliked this post\n    if (post.dislikes.some(dislike => dislike.userId.equals(userId))) {\n      return res.status(400).send('You have already disliked this post');\n    }\n\n    // Remove like if the user has previously liked this post\n    const userLikeIndex = post.likes.findIndex(like => like.userId.equals(userId));\n    if (userLikeIndex !== -1) {\n      post.likes.splice(userLikeIndex, 1);\n    }\n    post.dislikes.push({\n      userId\n    });\n    await post.save();\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Internal server error');\n  }\n});\n\n// Comment route\napp.post('/comment/:id', async (req, res) => {\n  if (!req.session.user) {\n    return res.redirect('/login');\n  }\n  try {\n    const postId = req.params.id;\n    const {\n      text\n    } = req.body;\n    const userId = req.session.user._id;\n    const post = await Post.findById(postId);\n    if (!post) {\n      return res.status(404).send('Post not found');\n    }\n    if (post.comments.length >= 10) {\n      return res.status(400).send('Maximum comment limit reached');\n    }\n    const newComment = {\n      text,\n      userId\n    };\n    post.comments.push(newComment);\n    await post.save();\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Internal server error');\n  }\n});\n\n// Add this route to your app.js file\napp.post('/post-link', async (req, res) => {\n  if (!req.session.user) {\n    return res.redirect('/login');\n  }\n  const {\n    title,\n    link,\n    category\n  } = req.body;\n  const userId = req.session.user._id;\n  try {\n    const newPost = new Post({\n      title,\n      link,\n      category,\n      userId,\n      likes: [],\n      dislikes: [],\n      comments: []\n    });\n    await newPost.save();\n    res.redirect('/dashboard');\n  } catch (error) {\n    console.error(error);\n    res.status(500).render('dashboard', {\n      user: req.session.user,\n      posts: {},\n      error: 'Error posting description',\n      timeAgo,\n      search: ''\n    });\n  }\n});\n\n// Start the server\nconst port = process.env.PORT || 3000;\napp.listen(port, () => {\n  console.log(`Server started on port ${port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiYm9keVBhcnNlciIsImJjcnlwdCIsInNlc3Npb24iLCJhcHAiLCJNb25nb1N0b3JlIiwidXNlIiwic3RhdGljIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2V0IiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VybmFtZSIsIlN0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJVc2VyIiwibW9kZWwiLCJwb3N0U2NoZW1hIiwidGl0bGUiLCJsaW5rIiwiY2F0ZWdvcnkiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImxpa2VzIiwiZGlzbGlrZXMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwiZGVmYXVsdCIsIm5vdyIsImNvbW1lbnRzIiwidGV4dCIsIlBvc3QiLCJzZWNyZXQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInRpbWVBZ28iLCJwb3N0ZWRUaW1lIiwidGltZURpZmYiLCJzZWNvbmRzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciIsImVycm9yIiwicG9zdCIsImJvZHkiLCJleGlzdGluZ1VzZXIiLCJmaW5kT25lIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwibmV3VXNlciIsInNhdmUiLCJjb25zb2xlIiwibG9nIiwicmVkaXJlY3QiLCJlcnIiLCJzdGF0dXMiLCJ1c2VyIiwicGFzc3dvcmRNYXRjaCIsImNvbXBhcmUiLCJzZWFyY2giLCJxdWVyeSIsImZpbHRlciIsIiRyZWdleCIsIlJlZ0V4cCIsInBvc3RzIiwiZmluZCIsInBvcHVsYXRlIiwic29ydCIsImNhdGVnb3JpemVkUG9zdHMiLCJmb3JFYWNoIiwicHVzaCIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJyZXN1bHRzIiwiJG9wdGlvbnMiLCJzZW5kIiwiZGVzdHJveSIsIl9pZCIsIm5ld1Bvc3QiLCJwb3N0SWQiLCJwYXJhbXMiLCJpZCIsImZpbmRCeUlkIiwic29tZSIsImxpa2UiLCJlcXVhbHMiLCJ1c2VyRGlzbGlrZUluZGV4IiwiZmluZEluZGV4IiwiZGlzbGlrZSIsInNwbGljZSIsInVzZXJMaWtlSW5kZXgiLCJsZW5ndGgiLCJuZXdDb21tZW50IiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGhhcnNoYVxcRGVza3RvcFxcVEVTVElOR1xcIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcbmNvbnN0IHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBNb25nb1N0b3JlID0gcmVxdWlyZSgnZXhwcmVzcy1zZXNzaW9uLW1vbmdvJyk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3B1YmxpYycpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2VqcycpO1xyXG5cclxubW9uZ29vc2UuY29ubmVjdCgnbW9uZ29kYitzcnY6Ly9uaWtraTpuaVRoaW40NUBjbHVzdGVyMC44OWltdGNnLm1vbmdvZGIubmV0L25pa2tpP3JldHJ5V3JpdGVzPXRydWUmdz1tYWpvcml0eScsIHtcclxuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB1c2VybmFtZTogU3RyaW5nLFxyXG4gIGVtYWlsOiBTdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IFN0cmluZyxcclxufSk7XHJcblxyXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcclxuXHJcbmNvbnN0IHBvc3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB0aXRsZTogU3RyaW5nLFxyXG4gIGxpbms6IFN0cmluZyxcclxuICBjYXRlZ29yeTogU3RyaW5nLFxyXG4gIHVzZXJJZDoge1xyXG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgcmVmOiAnVXNlcicsXHJcbiAgfSxcclxuICBsaWtlczogW1xyXG4gICAge1xyXG4gICAgICB1c2VySWQ6IHtcclxuICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgZGlzbGlrZXM6IFtcclxuICAgIHtcclxuICAgICAgdXNlcklkOiB7XHJcbiAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgIHJlZjogJ1VzZXInLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICBdLFxyXG4gIHRpbWVzdGFtcDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxyXG4gIH0sXHJcbiAgY29tbWVudHM6IFtcclxuICAgIHtcclxuICAgICAgdGV4dDogU3RyaW5nLFxyXG4gICAgICB1c2VySWQ6IHtcclxuICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF0sXHJcbn0pO1xyXG5cclxuY29uc3QgUG9zdCA9IG1vbmdvb3NlLm1vZGVsKCdQb3N0JywgcG9zdFNjaGVtYSk7XHJcblxyXG5hcHAudXNlKFxyXG4gIHNlc3Npb24oe1xyXG4gICAgc2VjcmV0OiAnT3Nvc0A0NTQ1JywgLy8gQ2hhbmdlIHRoaXMgdG8gYSBzZWN1cmUgc2VjcmV0IGtleVxyXG4gICAgcmVzYXZlOiBmYWxzZSxcclxuICAgIHNhdmVVbmluaXRpYWxpemVkOiB0cnVlLFxyXG4gIH0pXHJcbik7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjYWxjdWxhdGUgdGltZSBhZ29cclxuZnVuY3Rpb24gdGltZUFnbyh0aW1lc3RhbXApIHtcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IHBvc3RlZFRpbWUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xyXG4gIGNvbnN0IHRpbWVEaWZmID0gbm93IC0gcG9zdGVkVGltZTtcclxuICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcih0aW1lRGlmZiAvIDEwMDApO1xyXG4gIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XHJcbiAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKG1pbnV0ZXMgLyA2MCk7XHJcbiAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoaG91cnMgLyAyNCk7XHJcblxyXG4gIGlmIChkYXlzID4gMCkge1xyXG4gICAgcmV0dXJuIGRheXMgKyAnIGRheShzKSBhZ28nO1xyXG4gIH0gZWxzZSBpZiAoaG91cnMgPiAwKSB7XHJcbiAgICByZXR1cm4gaG91cnMgKyAnIGhvdXIocykgYWdvJztcclxuICB9IGVsc2UgaWYgKG1pbnV0ZXMgPiAwKSB7XHJcbiAgICByZXR1cm4gbWludXRlcyArICcgbWludXRlKHMpIGFnbyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnSnVzdCBub3cnO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUmVnaXN0cmF0aW9uIHJvdXRlXHJcbmFwcC5nZXQoJy9yZWdpc3RlcicsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJlcy5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogbnVsbCB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL3JlZ2lzdGVyJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG5cclxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG5cclxuICAgIGNvbnN0IG5ld1VzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgIHVzZXJuYW1lLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgbmV3VXNlci5zYXZlKCk7XHJcbiAgICBjb25zb2xlLmxvZygnVXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgIHJlcy5yZWRpcmVjdCgnL2xvZ2luJyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICByZXNcclxuICAgICAgLnN0YXR1cyg1MDApXHJcbiAgICAgIC5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFJvb3Qgcm91dGVcclxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJlcy5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogbnVsbCB9KTtcclxufSk7XHJcblxyXG4vLyBMb2dpbiByb3V0ZVxyXG5hcHAuZ2V0KCcvbG9naW4nLCAocmVxLCByZXMpID0+IHtcclxuICByZXMucmVuZGVyKCdsb2dpbi1yZWdpc3RlcicsIHsgZXJyb3I6IG51bGwgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9sb2dpbicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBhc3N3b3JkTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcblxyXG4gICAgaWYgKCFwYXNzd29yZE1hdGNoKSB7XHJcbiAgICAgIHJldHVybiByZXMucmVuZGVyKCdsb2dpbi1yZWdpc3RlcicsIHsgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXEuc2Vzc2lvbi51c2VyID0gdXNlcjtcclxuXHJcbiAgICByZXMucmVkaXJlY3QoJy9kYXNoYm9hcmQnKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICByZXNcclxuICAgICAgLnN0YXR1cyg1MDApXHJcbiAgICAgIC5yZW5kZXIoJ2xvZ2luLXJlZ2lzdGVyJywgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9kYXNoYm9hcmQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHNlYXJjaCwgY2F0ZWdvcnkgfSA9IHJlcS5xdWVyeTsgLy8gR2V0IHRoZSBzZWFyY2ggcXVlcnkgYW5kIGNhdGVnb3J5IGZyb20gdGhlIFVSTFxyXG4gIGNvbnN0IGZpbHRlciA9IHt9O1xyXG5cclxuICBpZiAoc2VhcmNoKSB7XHJcbiAgICBmaWx0ZXIudGl0bGUgPSB7ICRyZWdleDogbmV3IFJlZ0V4cChzZWFyY2gsICdpJykgfTsgLy8gQ2FzZS1pbnNlbnNpdGl2ZSB0aXRsZSBzZWFyY2hcclxuICB9XHJcblxyXG4gIGlmIChjYXRlZ29yeSAmJiBjYXRlZ29yeSAhPT0gJ0FsbCcpIHtcclxuICAgIGZpbHRlci5jYXRlZ29yeSA9IGNhdGVnb3J5OyAvLyBGaWx0ZXIgYnkgY2F0ZWdvcnkgaWYgc3BlY2lmaWVkXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0LmZpbmQoZmlsdGVyKVxyXG4gICAgICAucG9wdWxhdGUoJ3VzZXJJZCcsICd1c2VybmFtZScpXHJcbiAgICAgIC5wb3B1bGF0ZSgnY29tbWVudHMudXNlcklkJywgJ3VzZXJuYW1lJylcclxuICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pO1xyXG5cclxuICAgIGNvbnN0IGNhdGVnb3JpemVkUG9zdHMgPSB7fTtcclxuXHJcbiAgICAvLyBDYXRlZ29yaXplIHBvc3RzIGJ5IGNhdGVnb3J5XHJcbiAgICBwb3N0cy5mb3JFYWNoKHBvc3QgPT4ge1xyXG4gICAgICBpZiAoIWNhdGVnb3JpemVkUG9zdHNbcG9zdC5jYXRlZ29yeV0pIHtcclxuICAgICAgICBjYXRlZ29yaXplZFBvc3RzW3Bvc3QuY2F0ZWdvcnldID0gW107XHJcbiAgICAgIH1cclxuICAgICAgY2F0ZWdvcml6ZWRQb3N0c1twb3N0LmNhdGVnb3J5XS5wdXNoKHBvc3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnJlbmRlcignZGFzaGJvYXJkJywge1xyXG4gICAgICB1c2VyOiByZXEuc2Vzc2lvbi51c2VyLFxyXG4gICAgICBwb3N0czogY2F0ZWdvcml6ZWRQb3N0cyxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIHRpbWVBZ28sXHJcbiAgICAgIHNlYXJjaCxcclxuICAgICAgc2VsZWN0ZWRDYXRlZ29yeTogY2F0ZWdvcnkgfHwgJ0FsbCcsIC8vIFBhc3MgdGhlIHNlbGVjdGVkIGNhdGVnb3J5IHRvIHRoZSB0ZW1wbGF0ZVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLnJlbmRlcignZGFzaGJvYXJkJywge1xyXG4gICAgICB1c2VyOiByZXEuc2Vzc2lvbi51c2VyLFxyXG4gICAgICBwb3N0czoge30sXHJcbiAgICAgIGVycm9yOiAnRXJyb3IgZmV0Y2hpbmcgcG9zdHMnLFxyXG4gICAgICB0aW1lQWdvLFxyXG4gICAgICBzZWFyY2g6ICcnLFxyXG4gICAgICBzZWxlY3RlZENhdGVnb3J5OiAnQWxsJywgLy8gUGFzcyB0aGUgc2VsZWN0ZWQgY2F0ZWdvcnkgdG8gdGhlIHRlbXBsYXRlXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gQWRkIGEgbmV3IHJvdXRlIHRvIGhhbmRsZSB0aGUgc2VhcmNoIHJlcXVlc3RcclxuYXBwLmdldCgnL3NlYXJjaCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgc2VhcmNoIH0gPSByZXEucXVlcnk7IC8vIEdldCB0aGUgc2VhcmNoIHF1ZXJ5IGZyb20gdGhlIHJlcXVlc3RcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFBlcmZvcm0gYSBkYXRhYmFzZSBxdWVyeSB0byBmaW5kIHJlbGF0ZWQgbGlua3MgYnkgdGl0bGVcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQb3N0LmZpbmQoeyB0aXRsZTogeyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0pO1xyXG5cclxuICAgIC8vIFJlbmRlciBhIHBhcnRpYWwgdmlldyBvciBIVE1MIHdpdGggdGhlIHNlYXJjaCByZXN1bHRzXHJcbiAgICByZXMucmVuZGVyKCdzZWFyY2gtcmVzdWx0cycsIHsgcmVzdWx0cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnSW50ZXJuYWwgc2VydmVyIGVycm9yJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIExvZ291dCByb3V0ZVxyXG5hcHAuZ2V0KCcvbG9nb3V0JywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH1cclxuICAgIHJlcy5yZWRpcmVjdCgnL2xvZ2luJyk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gUG9zdCBEZXNjcmlwdGlvbiByb3V0ZVxyXG5hcHAucG9zdCgnL3Bvc3QtZGVzY3JpcHRpb24nLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBpZiAoIXJlcS5zZXNzaW9uLnVzZXIpIHtcclxuICAgIHJldHVybiByZXMucmVkaXJlY3QoJy9sb2dpbicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyB0aXRsZSwgbGluaywgY2F0ZWdvcnkgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHVzZXJJZCA9IHJlcS5zZXNzaW9uLnVzZXIuX2lkO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgbmV3UG9zdCA9IG5ldyBQb3N0KHtcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIGxpbmssXHJcbiAgICAgIGNhdGVnb3J5LFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgZGlzbGlrZXM6IFtdLFxyXG4gICAgICBjb21tZW50czogW10sXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBuZXdQb3N0LnNhdmUoKTtcclxuICAgIHJlcy5yZWRpcmVjdCgnL2Rhc2hib2FyZCcpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIHJlc1xyXG4gICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgLnJlbmRlcignZGFzaGJvYXJkJywge1xyXG4gICAgICAgIHVzZXI6IHJlcS5zZXNzaW9uLnVzZXIsXHJcbiAgICAgICAgcG9zdHM6IHt9LFxyXG4gICAgICAgIGVycm9yOiAnRXJyb3IgcG9zdGluZyBkZXNjcmlwdGlvbicsXHJcbiAgICAgICAgdGltZUFnbyxcclxuICAgICAgICBzZWFyY2g6ICcnLFxyXG4gICAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gTGlrZSByb3V0ZVxyXG5hcHAuZ2V0KCcvbGlrZS1wb3N0LzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGlmICghcmVxLnNlc3Npb24udXNlcikge1xyXG4gICAgcmV0dXJuIHJlcy5yZWRpcmVjdCgnL2xvZ2luJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcG9zdElkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkKHBvc3RJZCk7XHJcblxyXG4gICAgaWYgKCFwb3N0KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnUG9zdCBub3QgZm91bmQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEuc2Vzc2lvbi51c2VyLl9pZDtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdXNlciBoYXMgYWxyZWFkeSBsaWtlZCB0aGlzIHBvc3RcclxuICAgIGlmIChwb3N0Lmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UudXNlcklkLmVxdWFscyh1c2VySWQpKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ1lvdSBoYXZlIGFscmVhZHkgbGlrZWQgdGhpcyBwb3N0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVtb3ZlIGRpc2xpa2UgaWYgdGhlIHVzZXIgaGFzIHByZXZpb3VzbHkgZGlzbGlrZWQgdGhpcyBwb3N0XHJcbiAgICBjb25zdCB1c2VyRGlzbGlrZUluZGV4ID0gcG9zdC5kaXNsaWtlcy5maW5kSW5kZXgoKGRpc2xpa2UpID0+XHJcbiAgICAgIGRpc2xpa2UudXNlcklkLmVxdWFscyh1c2VySWQpXHJcbiAgICApO1xyXG4gICAgaWYgKHVzZXJEaXNsaWtlSW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHBvc3QuZGlzbGlrZXMuc3BsaWNlKHVzZXJEaXNsaWtlSW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3QubGlrZXMucHVzaCh7IHVzZXJJZCB9KTtcclxuICAgIGF3YWl0IHBvc3Quc2F2ZSgpO1xyXG4gICAgcmVzLnJlZGlyZWN0KCcvZGFzaGJvYXJkJyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBEaXNsaWtlIHJvdXRlXHJcbmFwcC5nZXQoJy9kaXNsaWtlLXBvc3QvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgaWYgKCFyZXEuc2Vzc2lvbi51c2VyKSB7XHJcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KCcvbG9naW4nKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwb3N0SWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWQocG9zdElkKTtcclxuXHJcbiAgICBpZiAoIXBvc3QpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQb3N0IG5vdCBmb3VuZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS5zZXNzaW9uLnVzZXIuX2lkO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IGRpc2xpa2VkIHRoaXMgcG9zdFxyXG4gICAgaWYgKHBvc3QuZGlzbGlrZXMuc29tZSgoZGlzbGlrZSkgPT4gZGlzbGlrZS51c2VySWQuZXF1YWxzKHVzZXJJZCkpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnWW91IGhhdmUgYWxyZWFkeSBkaXNsaWtlZCB0aGlzIHBvc3QnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgbGlrZSBpZiB0aGUgdXNlciBoYXMgcHJldmlvdXNseSBsaWtlZCB0aGlzIHBvc3RcclxuICAgIGNvbnN0IHVzZXJMaWtlSW5kZXggPSBwb3N0Lmxpa2VzLmZpbmRJbmRleCgobGlrZSkgPT5cclxuICAgICAgbGlrZS51c2VySWQuZXF1YWxzKHVzZXJJZClcclxuICAgICk7XHJcbiAgICBpZiAodXNlckxpa2VJbmRleCAhPT0gLTEpIHtcclxuICAgICAgcG9zdC5saWtlcy5zcGxpY2UodXNlckxpa2VJbmRleCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdC5kaXNsaWtlcy5wdXNoKHsgdXNlcklkIH0pO1xyXG4gICAgYXdhaXQgcG9zdC5zYXZlKCk7XHJcbiAgICByZXMucmVkaXJlY3QoJy9kYXNoYm9hcmQnKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnSW50ZXJuYWwgc2VydmVyIGVycm9yJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIENvbW1lbnQgcm91dGVcclxuYXBwLnBvc3QoJy9jb21tZW50LzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGlmICghcmVxLnNlc3Npb24udXNlcikge1xyXG4gICAgcmV0dXJuIHJlcy5yZWRpcmVjdCgnL2xvZ2luJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcG9zdElkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IHsgdGV4dCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEuc2Vzc2lvbi51c2VyLl9pZDtcclxuXHJcbiAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChwb3N0SWQpO1xyXG5cclxuICAgIGlmICghcG9zdCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Bvc3Qgbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBvc3QuY29tbWVudHMubGVuZ3RoID49IDEwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnTWF4aW11bSBjb21tZW50IGxpbWl0IHJlYWNoZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdDb21tZW50ID0ge1xyXG4gICAgICB0ZXh0LFxyXG4gICAgICB1c2VySWQsXHJcbiAgICB9O1xyXG5cclxuICAgIHBvc3QuY29tbWVudHMucHVzaChuZXdDb21tZW50KTtcclxuICAgIGF3YWl0IHBvc3Quc2F2ZSgpO1xyXG4gICAgcmVzLnJlZGlyZWN0KCcvZGFzaGJvYXJkJyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBBZGQgdGhpcyByb3V0ZSB0byB5b3VyIGFwcC5qcyBmaWxlXHJcbmFwcC5wb3N0KCcvcG9zdC1saW5rJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgaWYgKCFyZXEuc2Vzc2lvbi51c2VyKSB7XHJcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KCcvbG9naW4nKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgdGl0bGUsIGxpbmssIGNhdGVnb3J5IH0gPSByZXEuYm9keTtcclxuICBjb25zdCB1c2VySWQgPSByZXEuc2Vzc2lvbi51c2VyLl9pZDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdCh7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBsaW5rLFxyXG4gICAgICBjYXRlZ29yeSxcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBsaWtlczogW10sXHJcbiAgICAgIGRpc2xpa2VzOiBbXSxcclxuICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgbmV3UG9zdC5zYXZlKCk7XHJcbiAgICByZXMucmVkaXJlY3QoJy9kYXNoYm9hcmQnKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkucmVuZGVyKCdkYXNoYm9hcmQnLCB7XHJcbiAgICAgIHVzZXI6IHJlcS5zZXNzaW9uLnVzZXIsXHJcbiAgICAgIHBvc3RzOiB7fSxcclxuICAgICAgZXJyb3I6ICdFcnJvciBwb3N0aW5nIGRlc2NyaXB0aW9uJyxcclxuICAgICAgdGltZUFnbyxcclxuICAgICAgc2VhcmNoOiAnJyxcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBTdGFydCB0aGUgc2VydmVyXHJcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XHJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgc3RhcnRlZCBvbiBwb3J0ICR7cG9ydH1gKTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxD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","map":{"version":3,"names":["express","require","mongoose","bodyParser","bcrypt","session","app","MongoStore","use","static","urlencoded","extended","set","connect","useNewUrlParser","useUnifiedTopology","userSchema","Schema","username","String","email","password","User","model","postSchema","title","link","category","userId","type","Types","ObjectId","ref","likes","dislikes","timestamp","Date","default","now","comments","text","Post","secret","resave","saveUninitialized","timeAgo","postedTime","timeDiff","seconds","Math","floor","minutes","hours","days","get","req","res","render","error","post","body","existingUser","findOne","hashedPassword","hash","newUser","save","console","log","redirect","err","status","user","passwordMatch","compare","search","query","filter","$regex","RegExp","posts","find","populate","sort","categorizedPosts","forEach","push","selectedCategory","results","$options","send","destroy","_id","newPost","postId","params","id","findById","some","like","equals","userDislikeIndex","findIndex","dislike","splice","userLikeIndex","length","newComment","port","process","env","PORT","listen"],"sourceRoot":"C:\\Users\\harsha\\Desktop\\TESTING\\","sources":["app.js"],"sourcesContent":["const express = require('express');\r\nconst mongoose = require('mongoose');\r\nconst bodyParser = require('body-parser');\r\nconst bcrypt = require('bcrypt');\r\nconst session = require('express-session');\r\nconst app = express();\r\nconst MongoStore = require('express-session-mongo');\r\napp.use(express.static('public'));\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.set('view engine', 'ejs');\r\n\r\nmongoose.connect('mongodb+srv://nikki:niThin45@cluster0.89imtcg.mongodb.net/nikki?retryWrites=true&w=majority', {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  username: String,\r\n  email: String,\r\n  password: String,\r\n});\r\n\r\nconst User = mongoose.model('User', userSchema);\r\n\r\nconst postSchema = new mongoose.Schema({\r\n  title: String,\r\n  link: String,\r\n  category: String,\r\n  userId: {\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'User',\r\n  },\r\n  likes: [\r\n    {\r\n      userId: {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        ref: 'User',\r\n      },\r\n    },\r\n  ],\r\n  dislikes: [\r\n    {\r\n      userId: {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        ref: 'User',\r\n      },\r\n    },\r\n  ],\r\n  timestamp: {\r\n    type: Date,\r\n    default: Date.now,\r\n  },\r\n  comments: [\r\n    {\r\n      text: String,\r\n      userId: {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        ref: 'User',\r\n      },\r\n    },\r\n  ],\r\n});\r\n\r\nconst Post = mongoose.model('Post', postSchema);\r\n\r\napp.use(\r\n  session({\r\n    secret: 'Osos@4545', // Change this to a secure secret key\r\n    resave: false,\r\n    saveUninitialized: true,\r\n  })\r\n);\r\n\r\n// Function to calculate time ago\r\nfunction timeAgo(timestamp) {\r\n  const now = new Date();\r\n  const postedTime = new Date(timestamp);\r\n  const timeDiff = now - postedTime;\r\n  const seconds = Math.floor(timeDiff / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n\r\n  if (days > 0) {\r\n    return days + ' day(s) ago';\r\n  } else if (hours > 0) {\r\n    return hours + ' hour(s) ago';\r\n  } else if (minutes > 0) {\r\n    return minutes + ' minute(s) ago';\r\n  } else {\r\n    return 'Just now';\r\n  }\r\n}\r\n\r\n// Registration route\r\napp.get('/register', (req, res) => {\r\n  res.render('login-register', { error: null });\r\n});\r\n\r\napp.post('/register', async (req, res) => {\r\n  const { username, email, password } = req.body;\r\n\r\n  try {\r\n    const existingUser = await User.findOne({ email });\r\n\r\n    if (existingUser) {\r\n      return res.render('login-register', { error: 'Email already registered' });\r\n    }\r\n\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    const newUser = new User({\r\n      username,\r\n      email,\r\n      password: hashedPassword,\r\n    });\r\n\r\n    await newUser.save();\r\n    console.log('User registered successfully.');\r\n    res.redirect('/login');\r\n  } catch (err) {\r\n    console.error(err);\r\n    res\r\n      .status(500)\r\n      .render('login-register', { error: 'Internal server error' });\r\n  }\r\n});\r\n\r\n// Root route\r\napp.get('/', (req, res) => {\r\n  res.render('login-register', { error: null });\r\n});\r\n\r\n// Login route\r\napp.get('/login', (req, res) => {\r\n  res.render('login-register', { error: null });\r\n});\r\n\r\napp.post('/login', async (req, res) => {\r\n  const { email, password } = req.body;\r\n\r\n  try {\r\n    const user = await User.findOne({ email });\r\n\r\n    if (!user) {\r\n      return res.render('login-register', { error: 'Invalid email or password' });\r\n    }\r\n\r\n    const passwordMatch = await bcrypt.compare(password, user.password);\r\n\r\n    if (!passwordMatch) {\r\n      return res.render('login-register', { error: 'Invalid email or password' });\r\n    }\r\n\r\n    req.session.user = user;\r\n\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res\r\n      .status(500)\r\n      .render('login-register', { error: 'Internal server error' });\r\n  }\r\n});\r\n\r\napp.get('/dashboard', async (req, res) => {\r\n  const { search, category } = req.query; // Get the search query and category from the URL\r\n  const filter = {};\r\n\r\n  if (search) {\r\n    filter.title = { $regex: new RegExp(search, 'i') }; // Case-insensitive title search\r\n  }\r\n\r\n  if (category && category !== 'All') {\r\n    filter.category = category; // Filter by category if specified\r\n  }\r\n\r\n  try {\r\n    const posts = await Post.find(filter)\r\n      .populate('userId', 'username')\r\n      .populate('comments.userId', 'username')\r\n      .sort({ timestamp: -1 });\r\n\r\n    const categorizedPosts = {};\r\n\r\n    // Categorize posts by category\r\n    posts.forEach(post => {\r\n      if (!categorizedPosts[post.category]) {\r\n        categorizedPosts[post.category] = [];\r\n      }\r\n      categorizedPosts[post.category].push(post);\r\n    });\r\n\r\n    res.render('dashboard', {\r\n      user: req.session.user,\r\n      posts: categorizedPosts,\r\n      error: null,\r\n      timeAgo,\r\n      search,\r\n      selectedCategory: category || 'All', // Pass the selected category to the template\r\n    });\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).render('dashboard', {\r\n      user: req.session.user,\r\n      posts: {},\r\n      error: 'Error fetching posts',\r\n      timeAgo,\r\n      search: '',\r\n      selectedCategory: 'All', // Pass the selected category to the template\r\n    });\r\n  }\r\n});\r\n\r\n// Add a new route to handle the search request\r\napp.get('/search', async (req, res) => {\r\n  const { search } = req.query; // Get the search query from the request\r\n\r\n  try {\r\n    // Perform a database query to find related links by title\r\n    const results = await Post.find({ title: { $regex: search, $options: 'i' } });\r\n\r\n    // Render a partial view or HTML with the search results\r\n    res.render('search-results', { results });\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).send('Internal server error');\r\n  }\r\n});\r\n\r\n// Logout route\r\napp.get('/logout', (req, res) => {\r\n  req.session.destroy((err) => {\r\n    if (err) {\r\n      console.error(err);\r\n    }\r\n    res.redirect('/login');\r\n  });\r\n});\r\n\r\n// Post Description route\r\napp.post('/post-description', async (req, res) => {\r\n  if (!req.session.user) {\r\n    return res.redirect('/login');\r\n  }\r\n\r\n  const { title, link, category } = req.body;\r\n  const userId = req.session.user._id;\r\n\r\n  try {\r\n    const newPost = new Post({\r\n      title,\r\n      link,\r\n      category,\r\n      userId,\r\n      likes: [],\r\n      dislikes: [],\r\n      comments: [],\r\n    });\r\n\r\n    await newPost.save();\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res\r\n      .status(500)\r\n      .render('dashboard', {\r\n        user: req.session.user,\r\n        posts: {},\r\n        error: 'Error posting description',\r\n        timeAgo,\r\n        search: '',\r\n      });\r\n  }\r\n});\r\n\r\n// Like route\r\napp.get('/like-post/:id', async (req, res) => {\r\n  if (!req.session.user) {\r\n    return res.redirect('/login');\r\n  }\r\n\r\n  try {\r\n    const postId = req.params.id;\r\n    const post = await Post.findById(postId);\r\n\r\n    if (!post) {\r\n      return res.status(404).send('Post not found');\r\n    }\r\n\r\n    const userId = req.session.user._id;\r\n\r\n    // Check if the user has already liked this post\r\n    if (post.likes.some((like) => like.userId.equals(userId))) {\r\n      return res.status(400).send('You have already liked this post');\r\n    }\r\n\r\n    // Remove dislike if the user has previously disliked this post\r\n    const userDislikeIndex = post.dislikes.findIndex((dislike) =>\r\n      dislike.userId.equals(userId)\r\n    );\r\n    if (userDislikeIndex !== -1) {\r\n      post.dislikes.splice(userDislikeIndex, 1);\r\n    }\r\n\r\n    post.likes.push({ userId });\r\n    await post.save();\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).send('Internal server error');\r\n  }\r\n});\r\n\r\n// Dislike route\r\napp.get('/dislike-post/:id', async (req, res) => {\r\n  if (!req.session.user) {\r\n    return res.redirect('/login');\r\n  }\r\n\r\n  try {\r\n    const postId = req.params.id;\r\n    const post = await Post.findById(postId);\r\n\r\n    if (!post) {\r\n      return res.status(404).send('Post not found');\r\n    }\r\n\r\n    const userId = req.session.user._id;\r\n\r\n    // Check if the user has already disliked this post\r\n    if (post.dislikes.some((dislike) => dislike.userId.equals(userId))) {\r\n      return res.status(400).send('You have already disliked this post');\r\n    }\r\n\r\n    // Remove like if the user has previously liked this post\r\n    const userLikeIndex = post.likes.findIndex((like) =>\r\n      like.userId.equals(userId)\r\n    );\r\n    if (userLikeIndex !== -1) {\r\n      post.likes.splice(userLikeIndex, 1);\r\n    }\r\n\r\n    post.dislikes.push({ userId });\r\n    await post.save();\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).send('Internal server error');\r\n  }\r\n});\r\n\r\n// Comment route\r\napp.post('/comment/:id', async (req, res) => {\r\n  if (!req.session.user) {\r\n    return res.redirect('/login');\r\n  }\r\n\r\n  try {\r\n    const postId = req.params.id;\r\n    const { text } = req.body;\r\n    const userId = req.session.user._id;\r\n\r\n    const post = await Post.findById(postId);\r\n\r\n    if (!post) {\r\n      return res.status(404).send('Post not found');\r\n    }\r\n\r\n    if (post.comments.length >= 10) {\r\n      return res.status(400).send('Maximum comment limit reached');\r\n    }\r\n\r\n    const newComment = {\r\n      text,\r\n      userId,\r\n    };\r\n\r\n    post.comments.push(newComment);\r\n    await post.save();\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).send('Internal server error');\r\n  }\r\n});\r\n\r\n// Add this route to your app.js file\r\napp.post('/post-link', async (req, res) => {\r\n  if (!req.session.user) {\r\n    return res.redirect('/login');\r\n  }\r\n\r\n  const { title, link, category } = req.body;\r\n  const userId = req.session.user._id;\r\n\r\n  try {\r\n    const newPost = new Post({\r\n      title,\r\n      link,\r\n      category,\r\n      userId,\r\n      likes: [],\r\n      dislikes: [],\r\n      comments: [],\r\n    });\r\n\r\n    await newPost.save();\r\n    res.redirect('/dashboard');\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).render('dashboard', {\r\n      user: req.session.user,\r\n      posts: {},\r\n      error: 'Error posting description',\r\n      timeAgo,\r\n      search: '',\r\n    });\r\n  }\r\n});\r\n\r\n// Start the server\r\nconst port = process.env.PORT || 3000;\r\napp.listen(port, () => {\r\n  console.log(`Server started on port ${port}`);\r\n});\r\n"],"mappings":"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"}},"mtime":1695630638944}}